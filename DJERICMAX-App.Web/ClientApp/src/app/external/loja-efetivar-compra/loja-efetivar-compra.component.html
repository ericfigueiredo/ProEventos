
<div class="row contai">

  <div class="col-md-8 mb-2 corpo-esq">

    <div *ngFor="let s of servicos; let i = index"
      class="d-flex border rounded p-2 mb-3">
      <div class="me-3 layer-imgs">
        <img style="max-width: 100%" alt=""
          src="../../../../../arquivos/{{ s.nomeArquivo }}"/>
      </div>

      <div class="flex-grow-1" style="padding-left: 0.7em">
        <div class="titulo-pack">
          {{ s.nome }}
        </div>
        <div>
          {{ s.preco_Hora | currency : "BRL" : "symbol" : "1.2-2" : "pt-BR" }} /hora
        </div>
        <div>
          <a class="link" data-toggle="modal"
            data-target="#modalExcluirServico"
            (click)="abrirModal(s, i)"> Excluir </a>
          <!-- MODAL DE CONFIRMAÇÃO DE EXCLUSÃO -->
          <app-excluir-servico 
            [servico]="servicoParaExcluir" 
            [index]="indexParaExcluir" 
            [servicos]="servicos"
            (servicoExcluido)="atualizarTotais()"> <!-- Captura o evento -->
          </app-excluir-servico>
          <!-- MODAL DE CONFIRMAÇÃO DE EXCLUSÃO -->
        </div>

        <div class="d-flex justify-content-between">
          <span *ngIf="s.quantidade == 1">
            <strong> {{ s.quantidade }} </strong> hora de evento
            <a class="link" (click)="editarServico(s, 'efetivar', i)">Alterar</a>
          </span>
          <span *ngIf="s.quantidade > 1">
            <strong> {{ s.quantidade }} </strong> horas de evento
            <a class="link" (click)="editarServico(s, 'efetivar', i)">Alterar</a>
          </span>
          <span style="font-weight: bolder;">
            {{ s.precoTotal | currency : "BRL" : "symbol" : "1.2-2" : "pt-BR" }}
          </span>
        </div>
      </div>
    </div>

    <div *ngIf="servicos.length === 0">
      <span style="font-size: 13px;">
        Seu carrinho de serviços está vazio.
      </span>
    </div>

  </div>

  <div class="col-md-4 bm-2 corpo-dir">
    <div class="row">
      <div class="card col-md-12">
<div class="card-header">Resumo</div>
<div class="card-body" style="font-size: 13px;">
  
  <div class="row d-flex justify-content-between">
    <p> Serviços </p>
    <p> ({{servicos.length}}) </p>
  </div>
  <div class="row d-flex justify-content-between">
    <p> Data do evento </p>
    <p> 23/11/2025 </p>
  </div>
  <div class="row d-flex justify-content-between">
    <p> Frete </p>
    <p> {{frete}} </p>
  </div>
  <div class="row d-flex justify-content-between">
    <p> Total </p>
    <p> {{totalCarrinho | currency : "BRL" : "symbol" : "1.2-2" : "pt-BR" }} </p>
  </div>
  
  <div class="row d-flex justify-content-between">
    <p style="color: blue; font-size: 11px;">
    <a href="#"> Inserir cupom </a>
    </p>
  </div>
  
  <div class="row d-flex justify-content-between">
    <p><strong> Valor Final </strong></p>
    <p style="font-size: 2.3em;"><strong> 
      {{totalGeral | currency : "BRL" : "symbol" : "1.2-2" : "pt-BR" }} 
    </strong></p>
  </div>

  <div class="row d-flex justify-content-between"
    style="margin-top: -1.5em;">
    <p></p>
    <div>
      <a class="link" data-toggle="modal"
        data-target="#modalLimparCarrinho"> Limpar carrinho 
      </a>
      <!-- MODAL DE LIMPAR CARRINHO -->
       <app-limpar-carrinho (carrinhoLimpo)="limparCarrinho()"></app-limpar-carrinho>
       <!-- MODAL DE LIMPAR CARRINHO -->
    </div>
  </div>
</div>
</div>

<a [routerLink]="['/']" class="link"
style="
  margin-left: 0.5em;
  margin-right: -1em !important;
  ">Ver mais serviços...
</a>

    </div>
  </div>

    <div class="row col-md-4 mb-4 d-flex justify-content-end layer-botoes">
      <button
          class="btn btn-success btn-lg btn-contai">Salvar
        <i class="material-icons">browser_updated</i>
      </button>

      <a [routerLink]="['/']"
          class="btn btn-secondary btn-lg btn-contai"
          style="margin-left: 0.5em; margin-right: -1em !important;">Cancelar
        <i class="material-icons">file_download_off</i>
      </a>
    </div>


</div>
