<div class="modal-backdrop fade show" (click)="fechar()"></div>

<div class="modal fade show d-block" tabindex="-1" role="dialog">
  <div class="modal-dialog modal-dialog-centered modal-xl" role="document">
    <div class="modal-content">
      <div class="modal-header headiers">
        <h5 class="modal-title">{{ info }}</h5>
        <button type="button" class="close" (click)="fechar()" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>

      <div class="modal-body bodies glass-containerTable">
        <div class="container-fluid">
          <div class="bodys">
            <form>

              <div class="form-row col-md-12">
                <div class="col-md-4 align-items-center">

                 <!-- IMAGEM ATUAL -->
<div
  class="col-md-12"
  *ngIf="servico.nomeArquivo && !imagemTemporaria && !imagemMarcadaParaExcluir"
  style="padding-top: 1em; margin: -0.5em 0 0 0;"
>
  <div class="image-preview-elegant">
    <img
      [src]="'../../../../../../arquivos/' + servico.nomeArquivo"
      class="preview-circle align-items-center"
    />
    <button
      type="button"
      class="btn-remove"
      title="Remover imagem"
      (click)="removerImagem()"
    >
      <i class="fas fa-times"></i>
    </button>
  </div>
</div>

<!-- IMAGEM TEMPORÁRIA (preview antes de salvar) -->
<div
  class="col-md-12"
  *ngIf="imagemTemporaria && !imagemMarcadaParaExcluir"
  style="padding-top: 1em; margin: -0.5em 0 0 0;"
>
  <div class="image-preview-elegant">
    <img
      [src]="imagemPreview"
      class="preview-circle align-items-center"
    />
    <button
      type="button"
      class="btn-remove"
      title="Cancelar nova imagem"
      (click)="cancelarImagemTemporaria()"
    >
      <i class="fas fa-times"></i>
    </button>
  </div>
  <small class="text-warning">
    Nova imagem pendente de confirmação
  </small>
</div>

<!-- INPUT DE UPLOAD -->
<div class="col-md-12" *ngIf="!imagemMarcadaParaExcluir">
  <div class="file-input-elegant">
    <input
      type="file"
      id="inputFile"
      (change)="inputChange($event)"
      [disabled]="ativar_spinner"
      accept="image/*"
      class="file-input"
    />
    <label for="inputFile" class="file-input-label">
      <i class="fas fa-camera me-2"></i>
      <span class="file-input-browse">Procurar</span>
    </label>
  </div>
</div>

<!-- AVISO DE IMAGEM REMOVIDA -->
<div
  class="alert alert-warning text-center mt-2"
  *ngIf="imagemMarcadaParaExcluir"
>
  Imagem será removida ao salvar.
  <button
    type="button"
    class="btn btn-link p-0 ms-2"
    (click)="desfazerRemocaoImagem()"
  >
    Desfazer
  </button>
</div>
</div>

                <!-- ===================== CAMPOS DE TEXTO ===================== -->
                <div class="form-row col-md-8">
                  <div class="col-md-8">
                    <label for="inputNomeServico" class="sr-only">Serviço</label>
                    <input
                      type="text"
                      id="inputNomeServico"
                      name="nome"
                      placeholder="Nome do Pacote de Serviços"
                      class="form-control"
                      [(ngModel)]="servico.nome"
                      #nome="ngModel"
                      required
                    />
                  </div>

                  <div class="col-md-4">
                    <label for="inputpreco_Hora" class="sr-only">$$ Valor por Hora</label>
                    <input
                      type="text"
                      id="inputpreco_Hora"
                      name="preco_Hora"
                      placeholder="$$ Valor por Hora"
                      class="form-control"
                      [(ngModel)]="servico.preco_Hora"
                      #preco_Hora="ngModel"
                      required
                    />
                  </div>

                  <div class="col-md-12">
                    <label for="inputDescricao" class="sr-only">Descrição</label>
                    <textarea
                      id="inputDescricao"
                      rows="5"
                      name="descricao"
                      placeholder="Descrição do Pacote de Serviços"
                      class="form-control"
                      [(ngModel)]="servico.descricao"
                      #descricao="ngModel"
                      required
                      minlength="50"
                    ></textarea>
                  </div>
                </div>
              </div>

              <!-- MENSAGENS -->
              <div class="alert alert-danger" *ngIf="mensagem">
                {{ mensagem }}
              </div>

              <div class="alert alert-success" *ngIf="servicoCadastrado">
                Serviço cadastrado com sucesso!
              </div>
            </form>
          </div>
        </div>
      </div>

      <!-- ===================== RODAPÉ (BOTÕES SALVAR/CANCELAR) ===================== -->
      <div class="modal-footer footies">
        <button
          class="btn btn-outline-success btn-lg btYes col-md-2"
          type="button"
          (click)="cadastrarServico()"
          [disabled]="ativar_spinner"
        >
          <span *ngIf="ativar_spinner" class="spinner-border spinner-border-sm"></span>
          Salvar
        </button>

        <button
          class="btn btn-outline-secondary btn-lg btNo col-md-2"
          type="button"
          (click)="cancelar()"
        >
          Cancelar
        </button>
      </div>
    </div>
  </div>
</div>
